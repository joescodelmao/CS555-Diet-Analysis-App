<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Ingredient Recognition</title>
    <meta name="csrf-token" content="{{csrfToken}}" />
    <meta name="auth-token" content="{{authToken}}" />
    <link rel="stylesheet" href="/public/styles/main.css" />
    <script src="/public/js/ingredientRecognition.js" defer></script>
  </head>
  <body>
    <main class="container">
      <h1>Ingredient Recognition</h1>

      <section id="upload-section">
        <form id="image-form">
          <label for="image-input">Upload a photo of food or ingredient</label>
          <input id="image-input" name="image" type="file" accept="image/*" />
          <button id="recognize-btn" type="submit">Recognize Ingredients</button>
        </form>

        <div id="preview" aria-live="polite"></div>
      </section>

      <section id="results-section" hidden>
        <h2>Recognized Ingredients</h2>
        <ul id="ingredients-list"></ul>
        <div id="no-results" hidden>No ingredients found.</div>
      </section>

      <!-- === NEW VERIFY / CORRECT SECTION === -->
      <section id="verify-section" hidden>
        <h2>Verify / Correct Ingredients</h2>
        <button type="button" id="remove-all-btn" style="margin-bottom: 10px;">Remove All</button>
        <ul id="verify-list"></ul>
        <div style="margin-top: 10px;">
          <input type="text" id="add-ingredient-input" placeholder="Add ingredient manually" />
          <button type="button" id="add-ingredient-btn">Add</button>
        </div>
        <button type="button" id="submit-corrections-btn" style="margin-top: 10px;">Submit Corrections</button>
        <div id="correction-status" role="status" style="margin-top: 5px;"></div>
      </section>

      <section id="add-to-log" hidden>
        <h2>Add to Daily Log</h2>
        <form id="add-log-form">
          <input type="hidden" id="selected-food-id" />
          <label>Ingredient: <span id="selected-name"></span></label>
          <label>Serving size (grams):
            <input id="serving-size" type="number" min="1" value="100" />
          </label>
          <label>Meal:
            <select id="meal-select">
              <option value="breakfast">Breakfast</option>
              <option value="lunch">Lunch</option>
              <option value="dinner">Dinner</option>
              <option value="snack">Snack</option>
            </select>
          </label>
          <button id="add-log-btn" type="submit">Add to Log</button>
        </form>
        <div id="add-log-status" role="status"></div>
      </section>

    </main>
  </body>
</html>